<!DOCTYPE html>
<html lang="en">

<head>
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134133585-1"></script>
  <script>
    window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date()); gtag('config', 'UA-134133585-1');
  </script>

  <link rel="stylesheet" href="style.css">
  <link rel="icon" type="image/png" href="images/favicon.png">

  <title>andrew blinn</title>

  <meta charset="utf-8">
  <meta name="description"        content="I use programming language theory as a lens on UI design, trying to make engagement with abstractions more fluid, tangible, and fun" />
  <meta property="og:description" content="I use programming language theory as a lens on UI design, trying to make engagement with abstractions more fluid, tangible, and fun" />
  <meta property="og:title"       content="Andrew Blinn" />
  <meta property="og:image"       content="images/me/square-600.webp" />
</head>

<body><div class=container>

  <header>
    <div class="portrait" alt="andrew blinn"></div>
    <h1>andrew blinn</h1>
    <h2><div class=glyph></div><a href="mailto:me@andrewblinn.com">me@andrewblinn.com</a></h2>
  </header>

  <nav>
    <a style="padding: 0.6em 0em 0em 1.5em" href="cv/"> <img class=glyph src="images/icons/noun-arrow-1621454.svg" /> <span>cv</span></a>
    <a style="padding: 0.6em 0.75em 0em 0.75em" rel="me" href="https://twitter.com/disconcision"> <img class=glyph src="images/icons/noun-arrow-1621631.svg" /> <span>twitter</span></a>
    <a style="padding: 0.6em 1.5em 0em 0em;" rel="me" href="https://disconcision.com/"> <img class=glyph src="images/icons/noun-arrow-1621705.svg" /><span>tumblr</span></a>
    <a style="padding: 0em 0em 0em 1.5em" rel="me" href="https://scholar.google.com/citations?user=OccotHkAAAAJ"> <img class=glyph src="images/icons/noun-arrow-1621725.svg" /> <span>papers</span></a>
    <a style="padding: 0em 0.75em 0em 0.75em" rel="me" href="https://bsky.app/profile/disconcision.com"> <img class=glyph src="images/icons/noun-arrow-1621680.svg" /> <span>bluesky</span></a>
    <a style="padding: 0em 1.5em 0em 0em" rel="me" href="https://www.are.na/andrew-blinn"> <img class=glyph src="images/icons/noun-arrow-1621563.svg" /> <span>are.na</span></a>
    <a style="padding: 0em 0em 0.6em 1.5em" rel="me" href="https://github.com/disconcision"> <img class=glyph src="images/icons/noun-arrow-1621741.svg" /><span>github</span></a>
    <a style="padding: 0em 0.75em 0.6em 0.75em" rel="me" href="https://types.pl/@disconcision"> <img class=glyph src="images/icons/noun-arrow-1621740.svg" /><span>mastodon</span></a>
    <a style="padding: 0em 0em 0.6em 0" rel="me" href="https://instagram.com/disconcision"> <img class=glyph src="images/icons/noun-arrow-1621738.svg" /><span>instagram</span></a>
  </nav>

  <main>
    <div id="intro">
      <p class="general">
        I use programming language theory to explore & explain user interfaces,<br>
        trying to make engagement with abstractions more tangible and more fun
      </p>
      <p class="d2">
        <b>Can we make GUIs that compose like languages</b>?
        <b>Create languages made of GUIs</b>?<br>
        <b>Can malleable semantic interfaces help make code a thing you can dip your feet in</b>?
      </p>
      <p class="d1">
        <b>Language servers can provide semantic contextualization and guidance to inform<br>
        helpful editing affordances for both people and language models</b>:
        <b>LLMs need IDEs</b>
      </p>
      <p class="d3"> 
        <b>Math needs juice</b>.
        <b>Working on tactile affordances to support the development of<br>
        mechanical sympathy in the manipulation of materials with mechanized semantics</b>
      </p>  
      <section id=forge>
        <article class="a2">
          <img src="images/squares/propl.webp" alt="Programming code with embedded interactive GUIs" />
          <b>PL üü∞ UI</b>
        </article>
        <article class="a1">
          <img src="images/squares/chatlsp.webp" alt="A conversation between programmer, language server, and language model" />
          <b>IDEs ‚úñÔ∏è LLMs</b>
        </article>
        <article class="a3">
          <img src="images/squares/nool.webp" alt="A abstract algebraic tree structure with emojis representing variables" />
          <b>Math ‚ûï Juice</b>
        </article>
      </section>  
    </div>

     <!-- Old stuff to add to feed:
       490 guest lectures x2
       hazel mere milestones: ADTs, assisant-1, other stuff?
     -->

    <section id=newsfeed>
      <input id="ch" type="checkbox">
      <label for="ch"></label>
      <dl>
        <dt>Dec 2025</dt>
        <dd>
          Formed thesis committee and presented thesis proposal, tentatively titled <br>
          <a href="papers/Thesis-Proposal-Andrew Blinn-December-2025.pdf">Structured Semantic Context for Programming Processes</a> (<a href="papers/Thesis-Proposal-Slides-Andrew Blinn-December-2025.pdf">slides</a>)
        </dd>
        <dt>Nov 2025</dt>
        <dd>
          In Edinburgh for an <a href="https://www.aria.org.uk/opportunity-spaces/mathematics-for-safe-ai/safeguarded-ai/">ARIA Safeguarded AI workshop</a>,
          then visiting Helsinki
        </dd>
        <dt>Sep 2025</dt>
        <dd>
          Our paper <a href="https://arxiv.org/abs/2508.16848">Syntactic Completions with Material Obligations</a>
          <br>
          (<a href="https://dmoon1221.github.io/">David Moon</a>, <u>Andrew Blinn</u>, <a href="https://thomasporter522.github.io/">Thomas J. Porter</a>, <a href="https://web.eecs.umich.edu/~comar/">Cyrus Omar</a>)
          accepted at <a href="https://2025.splashcon.org/details/OOPSLA/209/Syntactic-Completions-with-Material-Obligations">OOPSLA 2025</a> 
        </dd>
        <dt>Aug 2025</dt>
        <dd>
          In Bristol for an <a href="https://www.aria.org.uk/opportunity-spaces/mathematics-for-safe-ai/safeguarded-ai/">ARIA Safeguarded AI workshop</a>,<br>
          then London for the <a href="https://luma.com/lxfxu463">Ink & Switch Social</a> at the <a href="https://www.tldraw.com/">TLDraw office</a>
        </dd>
        <dt>Jul 2025</dt>
        <dd>
          Now a co-investigator along with <a href="https://web.eecs.umich.edu/~comar/">Cyrus Omar</a> on an <a href="https://www.aria.org.uk/opportunity-spaces/mathematics-for-safe-ai/safeguarded-ai/meet-the-creators?tabId=scaffolding-platforms">ARIA grant</a> to develop
          <br>a <a href="https://www.aria.org.uk/opportunity-spaces/mathematics-for-safe-ai/safeguarded-ai/meet-the-creators?tabId=scaffolding-platforms&cardId=safeguarded-collaboration-with-ai-agents">scaffolding platform for safeguarded AI</a>
        </dd>
        <dt>Feb 2025</dt>
        <dd>
          Chatted about Hazel along with <a href="https://web.eecs.umich.edu/~comar/">Cyrus</a> on the
          <a href="https://shows.acast.com/dead-code/episodes/hole-y-diver-with-cyrus-omar-and-andrew-blinn">Dead Code podcast</a>
        </dd>
        <dt>Jan 2025</dt>
        <dd>
          Presetented work in progress on Hazelcards at a 
          <a href="https://www.youtube.com/watch?v=mz1F55UoVQs&list=LL&t=1139s">future of coding virtual meetup</a>
        </dd>
        <dt>Oct 2024</dt>
        <dd>
          In LA for <a href="https://2024.splashcon.org/home/splash-2024">SPLASH 2024</a>, including <a href="https://2024.splashcon.org/home/hatra-2024">HATRA</a>,
          <a href="https://2024.splashcon.org/home/live-2024">LIVE</a>, <a href="https://2024.splashcon.org/track/splash-2024-Onward-papers">Onward!</a>,
          and the <a href="https://lu.ma/2024-unconf-losangeles?tk=hLbS3r">Ink & Switch Unconf</a>;
          <br>
          spoke about <a href="https://dl.acm.org/doi/10.1145/3689728">Typed Holes for LLMs</a>: Recorded <a href="https://www.youtube.com/watch?v=-DYe8Fi78sg&t=12708s">Talk</a>, <a href="https://andrewblinn.com/papers/OOPSLA24.slides.Statically.Contextualizing.LLMs.pdf">Slides</a> 
        </dd>
        <dt>Sep 2024</dt>
        <dd>
          In Vancouver enroute to <a href="https://www.gradientretreat.com/">Gradient</a> with <a href="https://wolkenmachine.nl/">Marcel</a>,
          <a href="https://elliot.website/">Elliot</a>, and <a href="https://ivanish.ca/">Ivan</a>
          <br>
          (and surprise guests <a href="https://wiki.xxiivv.com/site/devine_lu_linvega.html">Devine</a> and <a href="https://www.pvh.ca/">PVH</a>)
        </dd>
        <dt>Aug 2024</dt>
        <dd>
          Our paper <a href="https://arxiv.org/abs/2409.00921">Statically Contextualizing Large Language Models with Typed Holes</a>
          <br>
          (<u>Andrew Blinn</u>, Xi Liang, June Hyung Kim, <a href="https://web.eecs.umich.edu/~comar/">Cyrus Omar</a>)
          accepted at <a href="https://2024.splashcon.org/details/splash-2024-oopsla/71/Statically-Contextualizing-Large-Language-Models-with-Typed-Holes">OOPSLA 2024</a> 
        </dd>
        <dt>May 2024</dt>
        <dd>
          On the program committees for
          <a href="https://2024.splashcon.org/home/live-2024">LIVE</a>,
          <a href="https://2024.splashcon.org/home/hatra-2024">HARTA</a>, and
          <a href="https://2024.splashcon.org/track/splash-2024-Onward-papers">Onward!</a>
          at <a href="https://2024.splashcon.org/">SPLASH 2024</a>
        </dd>
        <dt>Jan 2024</dt>
        <dd>
          Distinguished paper award <a href="https://dl.acm.org/doi/10.1145/3632910">Total Type Error Localization and Recovery with Holes</a>
          (<a href="https://popl24.sigplan.org/details/POPL-2024-popl-research-papers/70/Total-Type-Error-Localization-and-Recovery-with-Holes">POPL2024</a>)
          <br>
          (<a href="https://mustardfox.org/">Eric Zhao</a>, Raef Maroof, Anand Dukkipati, <u>Andrew Blinn</u>, Zoe Pan, <a href="https://web.eecs.umich.edu/~comar/">Cyrus Omar</a>)
        </dd>
        <dt>Jan 2024</dt>
        <dd>
          Our paper
          <a href="https://hazel.org/papers/propl24.pdf">Toward a Live, Rich, Composable, and Collaborative Planetary Compute Engine</a> accepted at <a href="https://popl24.sigplan.org/home/propl-2024">PROPL</a> @ <a href="https://popl24.sigplan.org">POPL24</a>
     (<a href="https://bandukwala.me/">Alexander Bandukwala</a>, <u>Andrew Blinn</u>, <a href="https://web.eecs.umich.edu/~comar/">Cyrus Omar</a>)
        </dd>
        <dt>Oct 2023</dt>
        <dd>
          Our paper <a href="https://www.computer.org/csdl/proceedings-article/vl-hcc/2023/294600a071/1RSFK8J0CiY">Gradual Structure Editing with Obligations</a> accepted at <a href="https://conf.researchr.org/home/vlhcc-2023">VL/HCC23</a>
          <br>(<a href="https://dmoon1221.github.io/">David Moon</a>, <u>Andrew Blinn</u>, <a href="https://web.eecs.umich.edu/~comar/">Cyrus Omar</a>)
        </dd>
        <dt>Oct 2023</dt>
        <dd>Spoke about type-directed prompt construction for LLM code completion
           <br>
          at the <a href="https://mwpls2023.engin.umich.edu/">2023 Midwest PL Summit</a>: <a href="http://andrewblinn.com/papers/2023-MWPLS-Type-directed-Prompt-Construction-for-LLM-powered-Programming-Assistants.pdf">Slides</a>
        </dd>
        <dt>Sep 2023</dt>
        <dd>
          Joined the <a href="https://talk.fission.codes/t/trainjam-2023/4789">Train Jam</a> on the <a href="https://www.amtrak.com/empire-builder-train">Empire Builder</a> line from Seattle to St. Louis
          <br>
          for the final <a href="https://www.thestrangeloop.com/">Strange Loop</a> and the first 
          <a href="https://lu.ma/localfirstswunconf-stlouis">Local First Unconf</a>
        </dd>
        <dt>May 2023</dt>
        <dd>
          Mastered (Computer) Science at the <a href="https://rackham.umich.edu/">University of Michigan</a>.
          Presented work on <a href="http://andrewblinn.com/papers/DRAFT-2022.10.andrew-blinn-prelim.pdf">formalizing programming assistants</a>, passed preliminary exam, and advanced to PhD candidacy
        </dd>
        <dt>Apr 2023</dt>
        <dd>
          In Toronto for <a href="https://www.causalislands.com/">Causal Islands</a> and then Galiano via Vancouver to work on <a href="nool/">nool</a>
          <br>
          at <a href="https://www.gradientretreat.com/">Gradient Retreat</a>
          (feat. <a href="https://omar.website/">Omar</a>, <a href="https://a9.io/">Max</a>, and <a href="https://ijc8.me/">Ian</a>)
        </dd>
        <dt>Sep 2022</dt>
        <dd>
          Our paper <a href="https://dl.acm.org/doi/abs/10.1145/3546196.3550164">Tylr - A Tiny Tile-based Structure Editor</a> accepted to TyDe workshop
          <br>(<a href="https://dmoon1221.github.io/">David Moon</a>, <u>Andrew Blinn</u>, <a href="https://web.eecs.umich.edu/~comar/">Cyrus Omar</a>)
        </dd>
        <dt>Sep 2022</dt>
        <dd>
          Spoke about <a href="https://ieeexplore.ieee.org/abstract/document/9833110">programming assistant architecture</a>
          at <a href="https://conf.researchr.org/home/vlhcc-2022">VLHCC22</a> in Rome
        </dd>
        <dt>May 2022</dt>
        <dd>
          <a href="https://ieeexplore.ieee.org/abstract/document/9833110">An Integrative Human-Centered Architecture for Interactive Programming Assistants</a>
          accepted at <a href="https://conf.researchr.org/home/vlhcc-2022">VLHCC22</a> (<u>Andrew Blinn</u>,
            <a href="https://dmoon1221.github.io/">David Moon</a>,
            <a href="https://dedbox.github.io/">Eric Griffis</a>,
            <a href="https://web.eecs.umich.edu/~comar/">Cyrus Omar</a>)
        </dd>
        <dt>Oct 2021</dt>
        <dd>
          Student volunteering at <a href="https://2021.splashcon.org/track/splash-2021-oopsla">SPLASH/OOPSLA</a> in Chicago; attended
          <a href="https://2021.splashcon.org/home/hatra-2021">HATRA</a> and  
          <a href="https://2021.splashcon.org/home/live-2021">LIVE</a> workshops
        </dd>
        <dt>Jun 2021</dt>
        <dd>
          Our paper <a href="https://dl.acm.org/doi/10.1145/3453483.3454059">Filling typed holes with live GUIs</a> accepted at
          <a href="https://www.pldi21.org/home.html">PLDI21</a>
          <br>(<a href="https://web.eecs.umich.edu/~comar/">Cyrus Omar</a>,
            <a href="https://dmoon1221.github.io/">David Moon</a>,
            <u>Andrew Blinn</u>,
            <a href="https://www.cs.cmu.edu/~iev/">Ian Voysey</a>,
            Nick Collins,
          <a href="https://people.cs.uchicago.edu/~rchugh/">Ravi Chugh</a>)
        </dd>
        <dt>Feb 2021</dt>
        <dd>
          In Vancouver enroute to work on <a href="https://furl.farm">furl</a> at <a href="https://www.gradientretreat.com/">Gradient Retreat</a><br>
          (feat. <a href="https://omar.website/">Omar</a>,
    <a href="https://www.tophtucker.com/">Toph</a>, <a href="https://worace.works/">Horace</a>, and <a href="https://x.com/robertjneal">Robert</a>)
        </dd>
        <dt>July 2019</dt>
        <dd>
          Attended Racket's <a href="https://school.racket-lang.org/2019/plan/">How to Design Languages Summer School</a>
          and presented
          <br>
          <a href="https://github.com/disconcision/fructure">Fructure</a> at <a href="https://con.racket-lang.org/2019/">RacketCon 2019</a>:
          <a href="https://www.youtube.com/watch?v=CnbVCNIh1NA">Talk</a>, <a href="https://github.com/disconcision/fructure/blob/master/screenshots/REAL-RacketCon-Fructure-Talk.pdf">Slides</a>
        </dd>
        <dt>May 2019</dt>
        <dd>
          Started work at <a href="https://engineering.todaq.net">TodaQ</a> Toronto
        </dd>
        <dt>May 2019</dt>
        <dd>
          Graduated the <a href="https://www.utoronto.ca/">University of Toronto</a> with an HBSc in Computer Science & Mathematics 
        </dd>
        <dt>April 2019</dt>
        <dd>
          Attended <a href="https://clojurenorth.com/2019/">Clojure North</a> in Toronto
        </dd>
    
        <dt>Oct 2018</dt>
        <dd>
          St. Louis triple header: Attending <a href="https://conf.researchr.org/home/icfp-2018">ICFP2018</a>, 
          <a href="https://www.thestrangeloop.com/2018/sessions.html">Strange Loop 2018</a>,
          <a href="https://con.racket-lang.org/2018/">RacketCon 2018</a>
        </dd>
    
        <dt>July 2018</dt>
        <dd>
          At the <a href="https://www.cs.uoregon.edu/research/summerschool/summer18/">Oregon Programming Languages Summer School</a> in Eugene
        </dd>
      </dl>
    </section>

    <section id=books>
      <img src="images/books/bs3.webp" />
      <img src="images/books/bs1.webp" />
      <img src="images/books/bs2.webp" />
      <img src="images/books/bs0.webp" />
      <img src="images/books/bs4.webp" />
      <img src="images/books/bs5.webp" />
      <img src="images/books/bs7.webp" />
      <img src="images/books/bs6.webp" />
      <img src="images/books/bs9.webp" />
      <img src="images/books/bs8.webp" />
    </section>  

    <p>Here's some other things i've worked on:</p>

    <section id=projects>
      <article id=fructure>
        <a class=container href="https://github.com/disconcision/fructure">
          <h1>fructure</h1>
          <h2>a structured interaction engine</h2>
          <p> fructure is a prototype for an extensible structured editing engine,
              built around a ui for composing term-rewriting edit actions.
              editing abstractions like cursors and code-folding are reinterpreted as
              syntactic scaffolding in a meta-grammar of syntactic affordances </p>
          <div class=glyph></div><div class=githubicon></div><div class=tumblricon></div></a>
        <figure id=fig1><img src="images/squares/fructure.webp" alt="bad dog combinator"></figure>
        <div class=videolink>
          <a href="https://www.youtube.com/watch?v=CnbVCNIh1NA">
            <div class=youtubeicon></div>listen to me blab @ racketcon</a>
          <div class=scrot></div></div></article>

      <article id=context-patterns>
        <a class=container href="https://github.com/disconcision/containment-patterns">
          <h1>context patterns</h1>
          <h2>capture contexts with racket/match</h2>
          <p> a library of custom pattern combinators for racket/match which generalize
              macro-by-example ellipses patterns. these use composable continuations to
              descend into arbitrary nested structures and capture both matches and their
              surrounding contexts </p>
          <div class=glyph></div><div class=githubicon></div></a>
        <figure><img src="images/squares/containment-patterns.webp" alt="tangerine nightmare"></figure></article>

      <article id=depthop>
        <a class=container href="https://github.com/disconcision/depthop">
          <h1>depthop</h1>
          <h2>an sdf raymarcher in c++</h2>
          <p> a simple cpu raymarcher parallelized with open MP,
              implementing constructive solid geometry, soft shadows,
              ambient occlusion, blinn-phong shading, and perlin noise</p>
          <div class=glyph></div><div class=githubicon></div></a>
        <figure><img src="images/squares/depthmarch.webp" alt="caged sphere"></figure></article></section>
      
    <section id=news>
      <article><img src="images/squares/shmyth.webp" alt="program synthesis in hazel" />
        <b>december 2020</b>
        <p><span>figuring out new ways for you to fight with your editor,
           hybridizing <a href="http://hazel.org">hazel</a> with the
           <a href="https://arxiv.org/pdf/1911.00583.pdf">smyth</a> program synthesizer</span></p></article>
  
      <article><img src="images/squares/hazelnut.webp" alt="a sequence of transformations in the hazelnut editor calculus"/>
        <b>september 2020</b>
        <p><span>joined cyrus omar's <a href="http://fplab.mplse.org/">fp lab</a>
           as a phd student at the <a href="https://rackham.umich.edu/">u of m</a>, 
           helping ruin programming forever</span></p></article>
  
      <article><video autoplay muted loop src="images/squares/todaq.mp4" alt="visual representation of hashed data structures"></video>
        <b>august 2020</b>
        <p><span>ended two years owning ownership at
           <a href="https://engineering.todaq.net/index.html">todaq</a>
           with a project on <a href="portfolio/todaq/index.html">
           making interfaces</a> for reifying fake digital stuff</span></p></article>
    </section>
      
  </main>

  <!-- other links:
    https://www.researchgate.net/profile/Andrew-Blinn
    https://dl.acm.org/profile/99659746231
    https://dblp.org/pid/295/3328.html
    https://www.pinterest.com/disconcision/
  -->
    
  <nav class="bottom">
    <a style="padding: 0.6em 0em 0em 1.5em" rel="me" href="https://www.threads.net/@disconcision"><img class=glyph src="images/icons/noun-arrow-1621737.svg" /><span>threads</span></a>
    <a style="padding: 0.6em 0.75em 0em 0.75em" rel="me" href="https://conf.researchr.org/profile/conf/andrewblinn1"><img class=glyph src="images/icons/noun-arrow-1621721.svg" /> <span>researchr</span></a>
    <a style="padding: 0.6em 1.5em 0em 0em;" rel="me" href="https://www.linkedin.com/in/andrewblinn/"><img class=glyph src="images/icons/noun-arrow-1621670.svg" /><span>linkedin</span></a>
    <a style="padding: 0em 0em 0em 1.5em" rel="me" href="https://huggingface.co/disconcision"><img class=glyph src="images/icons/noun-arrow-1621660.svg" /> <span>hugface</span></a>
    <a style="padding: 0em 0.75em 0em 0.75em" rel="me" href="https://orcid.org/0000-0001-6938-7379"><img class=glyph src="images/icons/noun-arrow-1621652.svg" /> <span>orcid</span></a>
    <a style="padding: 0em 1.5em 0em 0em" rel="me" href="https://www.goodreads.com/disconcision"><img class=glyph src="images/icons/noun-arrow-1621588.svg" /> <span>goodreads</span></a>
    <a style="padding: 0em 0em 0.6em 1.5em" rel="me" href="https://dl.acm.org/profile/99659746231"> <img class=glyph src="images/icons/noun-arrow-1621741.svg" /><span>acm</span></a>
    <a style="padding: 0em 0.75em 0.6em 0.75em" rel="me" href="https://dblp.org/pid/295/3328.html"> <img class=glyph src="images/icons/noun-arrow-1621740.svg" /><span>dblp</span></a>
    <a style="padding: 0em 0em 0.6em 0" rel="me" href="https://www.researchgate.net/profile/Andrew-Blinn"> <img class=glyph src="images/icons/noun-arrow-1621738.svg" /><span>rsgate</span></a>
  </nav>

  <footer>
    <p>updated üíÖ in september 2025 &nbsp;
       <a href="#top"> <span class="arrowup glyph"></span></a></p></footer>
    
</div>

<script>
(function() {
  const books = document.getElementById('books');
  if (!books) return;

  // Configuration
  const MIN_HEIGHT = 96;
  const MAX_HEIGHT = 800;
  const INITIAL_HEIGHT = 230; // pixels
  const INITIAL_CENTER = 0.5; // 0 = left edge, 0.5 = center, 1 = right edge
  const ANGLE_THRESHOLD = 1.2;

  // Apply initial state
  books.style.height = INITIAL_HEIGHT + 'px';
  // Need to wait a frame for layout to settle before setting scroll
  requestAnimationFrame(() => {
    const scrollableWidth = books.scrollWidth - books.clientWidth;
    books.scrollLeft = scrollableWidth * INITIAL_CENTER;
  });

  let startY, startX, startHeight, startScrollLeft, decided, mode;
  let startContentX, startContentWidth, cursorOffsetX;

  books.style.userSelect = 'none';
  books.querySelectorAll('img').forEach(img => {
    img.draggable = false;
  });

  books.addEventListener('mousedown', (e) => {
    e.preventDefault();
    startX = e.clientX;
    startY = e.clientY;
    startHeight = books.offsetHeight;
    startScrollLeft = books.scrollLeft;
    
    const rect = books.getBoundingClientRect();
    cursorOffsetX = e.clientX - rect.left;
    startContentX = books.scrollLeft + cursorOffsetX;
    startContentWidth = books.scrollWidth;
    
    decided = false;
    mode = null;
    document.addEventListener('mousemove', onDrag);
    document.addEventListener('mouseup', stopDrag);
  });

  function onDrag(e) {
    const dx = e.clientX - startX;
    const dy = e.clientY - startY;

    if (!decided && (Math.abs(dx) > 5 || Math.abs(dy) > 5)) {
      decided = true;
      mode = Math.abs(dy) > Math.abs(dx) * ANGLE_THRESHOLD ? 'resize' : 'scroll';
      books.style.cursor = mode === 'resize' ? 'ns-resize' : 'grab';
    }

    if (mode === 'resize') {
      const newHeight = Math.min(Math.max(startHeight + dy, MIN_HEIGHT), MAX_HEIGHT);
      books.style.height = newHeight + 'px';
      
      const scale = books.scrollWidth / startContentWidth;
      const newContentX = startContentX * scale;
      books.scrollLeft = newContentX - cursorOffsetX;
    } else if (mode === 'scroll') {
      books.scrollLeft = startScrollLeft - dx;
    }
  }

  function stopDrag() {
    document.removeEventListener('mousemove', onDrag);
    document.removeEventListener('mouseup', stopDrag);
    books.style.cursor = '';
    decided = false;
    mode = null;
  }
})();
</script>
</body>
</html>
